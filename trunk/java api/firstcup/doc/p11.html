<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Add an Input Component to Accept the User's Birth Date - Your First Cup: An Introduction to the Java EE Platform</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-10-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >Your First Cup: An Introduction to the Java EE Platform<?GenHTML /ReferencePage> > <a href="p6.html">3.&nbsp;&nbsp;Creating Your First Java EE Application</a> > <a href="p6.html#gcrkm">Coding the Example Application</a> > <a href="p8.html#gcrlt">Creating the Web Client</a> > <a href="p10.html#gcrrw">Creating the <tt>greeting.jsp</tt> Page</a>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="4"></td></tr>
<tr>
<td></td>
<td>&nbsp;</td>
<td style="width: 1in"><a href="p10.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td style="width: 1in"><a href="p12.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<div class="embeddedtocpane">
  <div class="cornerTL"><div class="cornerTR"></div></div>

  <h5><span class="toctitle"><a href="toc.html">Contents</a></span> <span class="index"></span></h5>
  <div class="embeddedtoc">
    <p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1"><a href="p2.html">Preface</a></p>
<p class="toc level1"><a href="p3.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1"><a href="p4.html">2.&nbsp;&nbsp;The Java Platform, Enterprise Edition</a></p>
<p class="toc level1"><a href="p6.html">3.&nbsp;&nbsp;Creating Your First Java EE Application</a></p>
<p class="toc level2"><a href="p6.html#gentextid-350">Architecture of the Example Application</a></p>
<p class="toc level3"><a href="p6.html#gcrlr">Tiers in the Example Application</a></p>
<p class="toc level3"><a href="p6.html#gcrlu">Java EE Technologies Used in the Example Application</a></p>
<p class="toc level2 tocsp"><a href="p6.html#gcrkm">Coding the Example Application</a></p>
<p class="toc level3"><a href="p6.html#gcskg">Getting Started</a></p>
<p class="toc level3"><a href="p6.html#gcskv">Register the Server with NetBeans</a></p>
<p class="toc level3"><a href="p6.html#gcskj">Create a Directory for the Example</a></p>
<p class="toc level3"><a href="p6.html#gcska">Specify Some Settings</a></p>
<p class="toc level3"><a href="p6.html#gcrkn">Creating the Web Service Endpoint</a></p>
<p class="toc level4"><a href="p6.html#gcrom">JAX-WS Endpoints</a></p>
<p class="toc level4"><a href="p6.html#gcroi">Creating the Endpoint</a></p>
<p class="toc level4"><a href="p7.html#gctoz">Building and Deploying the Web Service</a></p>
<p class="toc level3 tocsp"><a href="p7.html#gcrlx">Creating the Enterprise Bean</a></p>
<p class="toc level4"><a href="p7.html#gcrpi">Creating <tt>DukesBirthdayBean</tt> in NetBeans</a></p>
<p class="toc level3 tocsp"><a href="p8.html#gcrlt">Creating the Web Client</a></p>
<p class="toc level4"><a href="p8.html#gcroo">Setting <tt>firstcup-war</tt> to support JavaServer Faces Technology</a></p>
<p class="toc level4"><a href="p8.html#gcsll">Creating a Web Service Client for the <tt>firstcup-war</tt> Web Module</a></p>
<p class="toc level4"><a href="p8.html#gcrpf">Creating a Resource Bundle</a></p>
<p class="toc level4"><a href="p9.html">Configuring the Resource Bundle in the Configuration File</a></p>
<p class="toc level4"><a href="p9.html#gcslm">Adding a Dependency on the Enterprise Bean Module</a></p>
<p class="toc level4"><a href="p9.html#gcrqx">Creating the <tt>DukesBDay</tt> Managed Bean Class</a></p>
<p class="toc level4"><a href="p10.html#gcrrd">Configuring the <tt>DukesBDay</tt> Bean in the Configuration File</a></p>
<p class="toc level4"><a href="p10.html#gcrrw">Creating the <tt>greeting.jsp</tt> Page</a></p>
<p class="toc level5"><a href="p10.html#gcruv">Creating an Empty JSP Page</a></p>
<p class="toc level5"><a href="p10.html#gcrry">Declaring the JavaServer Faces Tag Libraries</a></p>
<p class="toc level5"><a href="p10.html#gcrqp">Adding the <tt>f:view</tt> and <tt>f:form</tt> Tags</a></p>
<p class="toc level5"><a href="p10.html#gcrqz">Adding Output Labels to Display Read-only Content</a></p>
<div class="onpage">
<p class="toc level5"><a href="">Add an Input Component to Accept the User's Birth Date</a></p>
<p class="toc level5"><a href="#gcrqg">Registering a Converter on the Input Component</a></p>
<p class="toc level5"><a href="#gcrrp">Adding an Error Message to Display if Conversion Fails</a></p>
<p class="toc level5"><a href="#gcrsf">Add a Button for Submitting the Form</a></p>
<p class="toc level4 tocsp"><a href="#gcrsp">Defining Page Navigation</a></p>
<p class="toc level4"><a href="#gcrti">Creating the <tt>response.jsp</tt> Page</a></p>
</div>
<p class="toc level3 tocsp"><a href="p12.html">Building, Packaging, Deploying, and Running the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqk">Preparing the Deployment Descriptor</a></p>
<p class="toc level3"><a href="p12.html#gctoj">Building and Packaging the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqe">Deploying the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqc">Running the <tt>firstcup</tt> Application</a></p>
<p class="toc level1 tocsp"><a href="p13.html">4.&nbsp;&nbsp;Building, Packaging, and Deploying and Running the Example Application</a></p>
<p class="toc level1"><a href="p15.html">5.&nbsp;&nbsp;Next Steps</a></p>

  </div>
  <div class="cornerBL"><div class="cornerBR"></div></div>
</div>




<div class="maincontent">
<!-- startindex -->
	<a name="gcrqi"></a><h5>Add an Input Component to Accept the User's Birth Date</h5>
<p>Another commonly used component tag is the <tt>inputText</tt> tag. This tag represents a
text field, which accepts input from the user. The <tt>inputText</tt> tag also
uses expressions to reference values. However, the <tt>inputText</tt> tag can use the expressions
to set values as well as get them. The <tt>inputText</tt> tag on the
<tt>greeting.jsp</tt> page accepts the user's birth date and sets this value into
the <tt>yourBD</tt> property of the <tt>DukesBDay</tt> bean.</p><p>To add the <tt>inputText</tt> tag, do the following:</p>
<ol><li><p>Add a beginning and ending <tt>inputText</tt> tag, right after the previous <tt>outputText</tt> tag that you added and give it an ID of <tt>userBirthday</tt>:</p><pre>&lt;h:inputText id="userBirthday">
&lt;/h:inputText></pre><p>Later, we'll register a converter on this component. Any error messages displayed as a result of conversion failing will reference this <tt>id</tt> attribute.</p></li>
<li><p>Add to the <tt>inputText</tt> tag a <tt>value</tt> attribute that references the <tt>yourBD</tt> property of <tt>DukesBDay</tt>:</p><pre>&lt;h:inputText id="userBirthday" 
   value="#{dukesBDay.yourBD}">
&lt;/h:inputText></pre></li></ol>
<a name="gcrqg"></a><h5>Registering a Converter on the Input Component</h5>
<p>JavaServer Faces technology includes a set of standard converters and validators that you
can register on components in order to convert and validate their data. You
register a converter or validator by nesting the tag representing the converter or
validator inside the input component's tag.</p><p>To add a converter to the input component discussed in the previous section,
do the following:</p>
<ol><li><p>Add an <tt>f:convertDateTime</tt> tag inside the <tt>inputText</tt> tag and specify the acceptable format of the input:</p><pre>&lt;h:inputText ...>
   &lt;f:convertDateTime pattern="MM/dd/yyyy" />
&lt;/h:inputText></pre><p>If the user does not enter something that can be converted to a <tt>Date</tt> type or the date the user entered is not of the specified pattern then a conversion error occurs. The next section describes how to create an error message and display it.</p></li>
<li><p>After the ending <tt>inputText</tt> tag, add an <tt>outputText</tt> tag that tells the user what the acceptable pattern is. Add an extra space in between the double-quote and the pound sign of the expression so that there will be space between the text field and the text displayed by this <tt>outputText</tt> tag:</p><pre>&lt;h:outputText value=" #{bundle.Pattern}"/></pre></li></ol>
<a name="gcrrp"></a><h5>Adding an Error Message to Display if Conversion Fails</h5>
<p>To specify an error message to be displayed if conversion fails, do the
following:</p>
<ol><li><p>Add a <tt>converterMessage</tt> attribute to the <tt>inputText</tt> tag and use it to specify the error message:</p><pre>&lt;h:inputText id="userBirthday" 
   value="#{dukesBDay.yourBD}" 
   converterMessage="#{bundle.DateError}">
&lt;/h:inputText></pre><p>If the conversion of the user's input fails, the following message, stored with the <tt>DateError</tt> key in the resource bundle will display on the page:</p><pre>Please enter the date in the format MM/dd/yyyy.</pre></li>
<li><p>Add a paragraph tag followed by a <tt>message</tt> tag to indicate where the error message must appear on the page, right before the ending <tt>form</tt> tag:</p><pre>&lt;p>&lt;h:message for="userBirthday" style="color:red"/>
&lt;/h:form></pre><p>The <tt>style</tt> attribute indicates the style of the error message. In this case, the error message text will be red. The <tt>for</tt> attribute references the ID of the component that generated the error.</p></li></ol>
<a name="gcrsf"></a><h5>Add a Button for Submitting the Form</h5>
<p>In order for the user to submit the form with his or
her birth date to the server, he or she needs to click a
button or a hyperlink, thereby causing a form submit. </p><p>To add a button to the page, do the following:</p>
<ol><li><p>Right before the message tag you added in the previous section, add the following paragraph tag and <tt>commandButton</tt> tag:</p><pre>&lt;p>&lt;h:commandButton value="#{bundle.Submit}" action="success"/></pre></li>
<li><p>Save the file by selecting File &rarr; Save from the menu.</p></li></ol>
<p>The <tt>value</tt> attribute indicates the text that is displayed on the button. Again,
you could use an expression to refer to this value. The <tt>action</tt> attribute
indicates a logical outcome, which tells the page navigation system which page to
display next. The following section explains the navigation system.</p><a name="gcrsp"></a><h5>Defining Page Navigation</h5>
<p>JavaServer Faces technology supports a powerful rule-based system for defining the flow of
pages in an application. These rules are defined in the configuration file. To
define the page navigation rules for the <tt>firstcup</tt> application, do the following:</p><a name="gcrtd"></a><h5><img src="graphics/procedure.gif"> Defining Page Navigation Rules</h5>
<ol>
<li><b>Expand the <tt>firstcup-war</tt> module in the Projects tree.</b></li>
<li><b>Open the folders Web Pages &rarr; WEB-INF.</b></li>
<li><b>Double-click <tt>faces-config.xml</tt>.</b></li>
<li><b>Right-click in the editor window and select JavaServer Faces &rarr; Add Navigation Rule.</b></li>
<li><b>In the Add Navigation Rule dialog, enter <tt>/greeting.jsp</tt> in the Rule from View
field.</b></li>
<li><b>Click Add.</b></li>
<li><b>Repeat steps 4 through 6 except enter <tt>/response.jsp</tt> in the Rule from View
field.</b></li>
<li><b>Right click in the editor again and select JavaServer Faces &rarr; Add Navigation
Case.</b></li>
<li><b>Select <tt>/greeting.jsp</tt> from the From View menu.</b></li>
<li><b>Enter success in the From Outcome field.</b></li>
<li><b>Select <tt>/response.jsp</tt> from the To View menu.</b></li>
<li><b>Click Add.</b></li>
<li><b>Repeat steps 8 through 12, except select <tt>/response.jsp</tt> from the From View menu
and select <tt>/greeting.jsp</tt> from the To View menu.</b><p>You should now see two navigation rules, one that defines how to navigate
from <tt>greeting.jsp</tt> to <tt>response.jsp</tt>, and another one that defines how to navigate from
<tt>response.jsp</tt> to <tt>greeting.jsp</tt>. The <tt>from-view-id</tt> tag indicates what the current page is. The
<tt>to-view-id</tt> tag indicates what page to go to next. </p><p>Recall from the section on adding a button that the <tt>commandButton</tt> tag has
an <tt>action</tt> attribute that indicates a logical outcome string. When the button is
clicked, the navigation system matches the current page ID and the logical outcome
to a navigation rule. When it finds a match, it will navigate to
the page that the rule specifies with its <tt>to-view-id</tt> tag.</p></li>
<li><b>Save the file by selecting File &rarr; Save from the menu bar.</b></li></ol><a name="gcrti"></a><h5>Creating the <tt>response.jsp</tt> Page</h5>
<p>To create the <tt>response.jsp</tt> page, do the following:</p>
<ol><li><p>Right&mdash;click the <tt>firstcup-war</tt> module.</p></li>
<li><p>Select New &rarr; JSP from the popup menu.</p></li>
<li><p>Enter <tt>response</tt> in the JSP File Name field.</p></li>
<li><p>Click Finish.</p></li>
<li><p>In the <tt>response.jsp</tt> file, after the <tt>html</tt> tag, replace any <tt>head</tt> tag in the file with the following <tt>head</tt> tag, which defines the content type:</p><pre>&lt;head>
   &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   &lt;title>Response Page&lt;/title>
&lt;/head></pre></li>
<li><p>Remove the beginning and ending body tags.</p></li>
<li><p>Remove <tt>&lt;h1>JSP Page&lt;/h2></tt> from the file.</p></li>
<li><p>Add the following <tt>taglib</tt> declarations right after the ending <tt>head</tt> tag.</p><pre>&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %></pre></li>
<li><p>After the <tt>taglib</tt> declarations, add the beginning and ending <tt>f:view</tt> tags.</p></li>
<li><p>In between the beginning and ending <tt>f:view</tt> tags, add the beginning and ending <tt>h:form</tt> tags.</p></li>
<li><p>In between the beginning and ending <tt>h:form</tt> tags, add the following <tt>outputText</tt> tags:</p><pre>&lt;h2>&lt;h:outputText value="#{bundle.YouAre} "/>
&lt;h:outputText value="#{bundle.SameAge}" rendered="#{dukesBDay.ageDiff == 0}"/>

&lt;h:outputText value="#{dukesBDay.absAgeDiff}" rendered="#{dukesBDay.ageDiff &lt; 0}"/>
&lt;h:outputText value=" #{bundle.Year} " rendered="#{dukesBDay.ageDiff == -1}"/>
&lt;h:outputText value=" #{bundle.Years} " rendered="#{dukesBDay.ageDiff &lt; -1}"/>
&lt;h:outputText value="#{bundle.Younger}" rendered="#{dukesBDay.ageDiff &lt; 0}"/>

&lt;h:outputText value="#{dukesBDay.absAgeDiff}" rendered="#{dukesBDay.ageDiff > 0}"/>
&lt;h:outputText value=" #{bundle.Year} " rendered="#{dukesBDay.ageDiff == 1}"/>
&lt;h:outputText value=" #{bundle.Years} " rendered="#{dukesBDay.ageDiff > 1}"/>
&lt;h:outputText value="#{bundle.Older}" rendered="#{dukesBDay.ageDiff > 0}"/></pre><p>The <tt>outputText</tt> tags on the <tt>response.jsp</tt> page use the <tt>rendered</tt> attribute to control which one of the tags will actually have their content rendered. Let's take a look at the set of <tt>outputText</tt> tags:</p><p>The first tag will yield the text &ldquo;You are&rdquo;. </p><p>The <tt>rendered</tt> attribute of the second <tt>outputText</tt> tag references an expression that tests if the <tt>ageDiff</tt> property of <tt>DukesBDay</tt> is equal to zero. If this expression returns <tt>true</tt> then the message referenced by the tag's <tt>value</tt> attribute will be rendered. This message is &ldquo;the same age as Duke&rdquo;.</p><p>The <tt>value</tt> attribute of the third tag references the <tt>absAgeDiff</tt> property of <tt>DukesBDay.</tt> This property holds the absolute value of the age difference. The expressions referenced by the <tt>rendered</tt> attributes of the fourth and fifth tags test whether or not the age difference is equal to -1 or less than &mdash;1 to determine whether the age difference is only one year or more than one year so that &ldquo;year&rdquo; or &ldquo;years&rdquo; is rendered appropriately. The sixth tag tests if <tt>ageDiff</tt> is less than zero. If this is true then the absolute value of the age difference is rendered along with the message &ldquo;younger than Duke!&rdquo;. So an example message that can be rendered by this group of tags is:</p><pre>You are 10 years younger than Duke!</pre><p>The last group of tags work similarly to the previous set of tags, except that their <tt>rendered</tt> attributes test for age differences greater than zero, indicating that the user is older than Duke.</p></li>
<li><p>Before the ending <tt>&lt;/h:form></tt> tag, add the following paragraph tag and <tt>commandButton</tt> tag to render a button used for returning to the <tt>greeting.jsp</tt> page.</p><pre>&lt;p>&lt;h:commandButton id="back" value="#{bundle.Back}" action="success"/></pre></li>
<li><p>Save the file by selecting File &rarr; Save.</p></li></ol>

<!--stopindex-->
</div>


<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p10.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td></td>
<td><a href="p12.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

