<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating Your First Java EE Application - Your First Cup: An Introduction to the Java EE Platform</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-10-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"  class="a0v0">
<!--stopindex-->

<a name="top"></a>

<!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1">
<div class="a1v0">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="bottom">
<td nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com">sun.com</a>
<a href="http://docs.sun.com/" class="dividelink">docs.sun.com</a>
</span>
</td><td align="right" nowrap="nowrap">
<span class="toolbarlinks">
<a href="http://www.sun.com/MySun/">My Sun</a>
<a href="http://www.sun.com/worldwide/" class="dividelink">Worldwide Sites</a>
</span>
</td></tr>
</table>
</div>
</div>
<!-- END A1 COMPONENT V.0 -->

<!-- BEGIN A2 COMPONENT V.0 -->
<div class="a2" id="a2v0">
<div class="cornerTL">
<div class="cornerTR">
<div class="cornerBL">
<div class="cornerBR">
<div class="a2topiclinks">
<table cellpadding="1" cellspacing="0" border="0">
<tr valign="bottom">
<td><a href="http://www.sun.com/" title="Home Page"><img src="css/a.gif" alt="Home Page" width="104" height="58" border="0" class="sunlogo"></a></td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip1"></td>
<td class="navlinks" id="navlink1">
<div>
<a id="glink1" href="http://www.sun.com/products/">Products</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip2"></td>
<td class="navlinks" id="navlink2">
<div>
<a id="glink2" href="http://www.sun.com/downloads/">Downloads</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip3"></td><td class="navlinks" id="navlink3">
<div>
<a id="glink3" href="http://www.sun.com/service/">Service &amp; Solutions</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip4"></td><td class="navlinks" id="navlink4">
<div>
<a id="glink4" href="http://www.sun.com/support/">Support</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip5"></td><td class="navlinks" id="navlink5">
<div>
<a id="glink5" href="http://www.sun.com/training/">Training</a>
</div>
</td><td><img src="css/a.gif" alt="" width="1" height="1" border="0" id="ip6"></td><td class="navlinks" id="navlink6">
<div>
<a id="glink6" href="http://research.sun.com/">Research</a>
</div>
</td>
</tr>
</table>
</div>

</div></div></div></div>
</div>
<!-- END A2 COMPONENT V.0 -->

<!-- BEGIN BREADCRUMB -->
<div id="breadcrumb">
<?GenHTML ReferencePage >Your First Cup: An Introduction to the Java EE Platform<?GenHTML /ReferencePage>
</div><br />
<!-- END BREADCRUMB -->

<!-- BEGIN WRAPPER TABLE, 1 COLUMN, MAIN -->
<table border="0" cellpadding="0" cellspacing="10" width="100%">
<tr valign="bottom"><td width="100%" valign="top">
<!-- BEGIN CENTRAL COLUMN COMPONENTS -->

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr><td colspan="4"></td></tr>
<tr>
<td></td>
<td>&nbsp;</td>
<td style="width: 1in"><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td style="width: 1in"><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->

</td></tr>
<tr><td width="100%" valign="top">
<a name="skip2content"> </a>

<div class="embeddedtocpane">
  <div class="cornerTL"><div class="cornerTR"></div></div>

  <h5><span class="toctitle"><a href="toc.html">Contents</a></span> <span class="index"></span></h5>
  <div class="embeddedtoc">
    <p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1"><a href="p2.html">Preface</a></p>
<p class="toc level1"><a href="p3.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1"><a href="p4.html">2.&nbsp;&nbsp;The Java Platform, Enterprise Edition</a></p>
<div class="onpage">
<p class="toc level1"><a href="">3.&nbsp;&nbsp;Creating Your First Java EE Application</a></p>
<p class="toc level2"><a href="#gentextid-350">Architecture of the Example Application</a></p>
<p class="toc level3"><a href="#gcrlr">Tiers in the Example Application</a></p>
<p class="toc level3"><a href="#gcrlu">Java EE Technologies Used in the Example Application</a></p>
<p class="toc level2 tocsp"><a href="#gcrkm">Coding the Example Application</a></p>
<p class="toc level3"><a href="#gcskg">Getting Started</a></p>
<p class="toc level3"><a href="#gcskv">Register the Server with NetBeans</a></p>
<p class="toc level3"><a href="#gcskj">Create a Directory for the Example</a></p>
<p class="toc level3"><a href="#gcska">Specify Some Settings</a></p>
<p class="toc level3"><a href="#gcrkn">Creating the Web Service Endpoint</a></p>
<p class="toc level4"><a href="#gcrom">JAX-WS Endpoints</a></p>
<p class="toc level4"><a href="#gcroi">Creating the Endpoint</a></p>
</div>
<p class="toc level4"><a href="p7.html#gctoz">Building and Deploying the Web Service</a></p>
<p class="toc level3 tocsp"><a href="p7.html#gcrlx">Creating the Enterprise Bean</a></p>
<p class="toc level4"><a href="p7.html#gcrpi">Creating <tt>DukesBirthdayBean</tt> in NetBeans</a></p>
<p class="toc level3 tocsp"><a href="p8.html#gcrlt">Creating the Web Client</a></p>
<p class="toc level4"><a href="p8.html#gcroo">Setting <tt>firstcup-war</tt> to support JavaServer Faces Technology</a></p>
<p class="toc level4"><a href="p8.html#gcsll">Creating a Web Service Client for the <tt>firstcup-war</tt> Web Module</a></p>
<p class="toc level4"><a href="p8.html#gcrpf">Creating a Resource Bundle</a></p>
<p class="toc level4"><a href="p9.html">Configuring the Resource Bundle in the Configuration File</a></p>
<p class="toc level4"><a href="p9.html#gcslm">Adding a Dependency on the Enterprise Bean Module</a></p>
<p class="toc level4"><a href="p9.html#gcrqx">Creating the <tt>DukesBDay</tt> Managed Bean Class</a></p>
<p class="toc level4"><a href="p10.html#gcrrd">Configuring the <tt>DukesBDay</tt> Bean in the Configuration File</a></p>
<p class="toc level4"><a href="p10.html#gcrrw">Creating the <tt>greeting.jsp</tt> Page</a></p>
<p class="toc level5"><a href="p10.html#gcruv">Creating an Empty JSP Page</a></p>
<p class="toc level5"><a href="p10.html#gcrry">Declaring the JavaServer Faces Tag Libraries</a></p>
<p class="toc level5"><a href="p10.html#gcrqp">Adding the <tt>f:view</tt> and <tt>f:form</tt> Tags</a></p>
<p class="toc level5"><a href="p10.html#gcrqz">Adding Output Labels to Display Read-only Content</a></p>
<p class="toc level5"><a href="p11.html">Add an Input Component to Accept the User's Birth Date</a></p>
<p class="toc level5"><a href="p11.html#gcrqg">Registering a Converter on the Input Component</a></p>
<p class="toc level5"><a href="p11.html#gcrrp">Adding an Error Message to Display if Conversion Fails</a></p>
<p class="toc level5"><a href="p11.html#gcrsf">Add a Button for Submitting the Form</a></p>
<p class="toc level4 tocsp"><a href="p11.html#gcrsp">Defining Page Navigation</a></p>
<p class="toc level4"><a href="p11.html#gcrti">Creating the <tt>response.jsp</tt> Page</a></p>
<p class="toc level3 tocsp"><a href="p12.html">Building, Packaging, Deploying, and Running the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqk">Preparing the Deployment Descriptor</a></p>
<p class="toc level3"><a href="p12.html#gctoj">Building and Packaging the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqe">Deploying the <tt>firstcup</tt> Enterprise Application</a></p>
<p class="toc level3"><a href="p12.html#gctqc">Running the <tt>firstcup</tt> Application</a></p>
<p class="toc level1 tocsp"><a href="p13.html">4.&nbsp;&nbsp;Building, Packaging, and Deploying and Running the Example Application</a></p>
<p class="toc level1"><a href="p15.html">5.&nbsp;&nbsp;Next Steps</a></p>

  </div>
  <div class="cornerBL"><div class="cornerBR"></div></div>
</div>




<div class="maincontent">
<!-- startindex -->
	<a name="gcrkp"></a>Chapter&nbsp;3<h3>Creating Your First Java EE Application</h3><p>This chapter gives an overview of the example application and step-by-step instructions on
coding the example application.</p><a name="gentextid-350"></a><h3>Architecture of the Example Application</h3>
<p>The example application consists of three main components: <tt>DukesAgeService</tt>, a web service
endpoint; <tt>DukesBirthdayBean</tt>, an enterprise bean; and <tt>firstcup</tt>, a web application created with JavaServer Faces
technology.</p><p><tt>DukesAgeService</tt> is a JAX-WS endpoint that calculates the age of Duke, the Java
mascot. Duke was born on May 23, 1995, when the first demo of
Java technology was publicly released.</p><p><tt>DukesBirthdayBean</tt> is a stateless session bean that calculates the difference between the user's
age and Duke's age.</p><p>The <tt>firstcup</tt> web application is a JavaServer Faces application that accesses <tt>DukesAgeService</tt> to
display Duke's age, reads in a date provided by the user, accesses<tt>DukesBirthdayBean</tt> to calculate
who is older, and then displays the difference in years between the user
and Duke.</p><p>The web application consists of the following:</p>
<ul><li><p><tt>greeting.jsp</tt>: A JSP page with which a user can enter a date</p></li>
<li><p><tt>response.jsp</tt>: A JSP page that tells the user whether he or she is older or younger than Duke, based on the date the user entered in the <tt>greeting.jsp</tt> page</p></li>
<li><p><tt>DukesBDay.java</tt>: A JavaServer Faces managed bean that defines properties to hold the user's birth date, get Duke's current age from the web service, and get the age difference between the user and Duke from the enterprise bean.</p></li>
<li><p><tt>faces-config.xml</tt>: A file used to configure resources for the JavaServer Faces application. In the case of this application, the file configures a resource bundle containing messages, the managed bean, <tt>DukesBDay</tt>, and the page navigation rules.</p></li>
<li><p><tt>web.xml</tt>: The web application's deployment descriptor, which is used to configure certain aspects of a web application when it is installed. In this case, it is used to provide a mapping to the application's <tt>FacesServlet</tt> instance, which accepts incoming requests, passes them to the life cycle for processing, and initializes resources.</p></li></ul>
<a name="gcrlr"></a><h4>Tiers in the Example Application</h4>
<p>The example application has one web tier component (the <tt>firstcup</tt>web client) and two
business tier components (the <tt>DukesAgeService</tt>web service and the <tt>DukesBirthdayBean</tt>enterprise bean). The user's web browser
is the client tier component, as it accesses the rest of the application
through the web tier. The example application does not access the EIS tier.</p><a name="gcrlu"></a><h4>Java EE Technologies Used in the Example Application</h4>
<p>The <tt>DukesAgeService</tt> web service endpoint is a JAX-WS endpoint The <tt>DukesBirthdayBean</tt> enterprise bean
is a stateless session bean. The <tt>firstcup</tt>web client is a JavaServer Faces application that
runs in the web container of the Java EE server.</p><a name="gcrkm"></a><h3>Coding the Example Application</h3>
<p>This section describes how to code the example application.</p><a name="gcskg"></a><h4>Getting Started</h4>
<p>Before you start coding the example, you need to perform some set-up tasks:</p>
<ol><li><p>Register the server with your NetBeans IDE.</p></li>
<li><p>Create a directory for the example you will build.</p></li>
<li><p>Specify some settings.</p></li></ol>
<a name="gcskv"></a><h4><img src="graphics/procedure.gif"> Register the Server with NetBeans</h4><ol>
<li><b>Launch the NetBeans IDE.</b></li>
<li><b>From the menu, select Tools&rarr;Server Manager.</b></li>
<li><b>Click Add Server.</b></li>
<li><b>In the Add Server Instance dialog, select Sun Java System Application Server from
the Server menu.</b></li>
<li>(Optional) <b>Enter a name for the server in the Name field. </b></li>
<li><b>Click Next.</b></li>
<li><b>Click Browse to find the location of the Application Server installation.</b></li>
<li><b>Click Next.</b></li>
<li><b>Enter the user name you chose when you installed the Application Server in
the Admin Username field.</b></li>
<li><b>Enter the password for this username in the Admin Password field.</b></li>
<li><b>Click Finish.</b></li>
<li><b>Click Close.</b></li></ol><a name="gcskj"></a><h4><img src="graphics/procedure.gif"> Create a Directory for the Example</h4><ol>
<li><b>Create another directory at the same level as the <tt>example</tt> directory and call
it <tt>myexample</tt>. You'll put the First Cup application that you build while following
this tutorial in this directory.</b></li>
<li><b>Copy the entire <tt>bp-project</tt> folder from the <tt>example</tt> directory to the <tt>myexample</tt>
directory.</b></li></ol><a name="gcska"></a><h4><img src="graphics/procedure.gif"> Specify Some Settings</h4><ol>
<li><b>In the <tt>myexample/bp-project</tt> directory, copy the <tt>build.properties.sample</tt> file to <tt>build.properties</tt>.</b></li>
<li><b>Open the <tt>build.properties</tt> file in a text editor.</b></li>
<li><b>Set the <tt>javaee.home</tt> property to the path of your Application Server installation. Use
forward slashes in the path, even if you are on the Windows platform.
For example, you would enter <tt>C:/myServer</tt> instead of <tt>C:\myServer</tt>.</b></li>
<li><b>Set the <tt>firstcup.tutorial.home</tt> property to the location of your <tt>firstcup</tt> tutorial installation, such as
<tt>C:/firstcup</tt>.</b></li>
<li><b>Change <tt>example</tt> to <tt>myexample</tt> in the path specified by the <tt>javaee.server.passwordfile</tt> property.</b></li>
<li><b>Open the <tt>admin-password.txt</tt> file from the <tt>myexample/bp-project </tt>directory in a text editor.</b></li>
<li><b>Set the <tt>AS_ADMIN_PASSWORD</tt> property to your Application Server password.</b></li>
<li><b>Save the <tt>build.properties</tt> and <tt>admin-password.txt</tt> files and close them.</b></li></ol><a name="gcrkn"></a><h4>Creating the Web Service Endpoint</h4>
<p>The <tt>DukesAgeService</tt> endpoint is a simple web service. Web services are web-based applications
that use open, XML-based standards and transport protocols to exchange data with calling
clients. Both the requests and responses are sent as XML documents, and are
usually sent as HTTP packets. This makes interoperability between different systems and applications
easy, as it is not necessary for the client to know the underlying
architecture of the server and vice-versa to make a successful web service call.
</p><p>Web services are designed to be independent of the client. Typically web service
endpoints are publicly available to a wide variety of clients, and the clients
are located throughout the internet. This is called &ldquo;loose coupling,&rdquo; as the clients
and servers are connected only by the standard XML-based requests and responses. For
this reason, <tt>DukesAgeService</tt> will be developed in its own application module, and deployed
separately from the <tt>DukesBirthdayBean</tt> enterprise bean and <tt>firstcup</tt> web client.</p><a name="gcrom"></a><h5>JAX-WS Endpoints</h5>
<p><tt>DukesAgeService</tt> is a JAX-WS endpoint implemented as a servlet. Servlets are web components
that run in the web container.</p><p>We'll begin by creating a servlet class, then decorate the class with the
<tt>@WebService</tt>annotation to make the class a web service endpoint, and finally we will
add the <tt>getDukesAge</tt> method to calculate and return Duke's age.</p><a name="gcroi"></a><h5>Creating the Endpoint</h5>
<p>In NetBeans or another editor, create a Java class source file called
<tt>DukesAge.java</tt> in the <tt>com.sun.firstcup.webservice</tt> package.</p><a name="gcrpl"></a><h5><img src="graphics/procedure.gif"> Create the Project in NetBeans</h5>
<ol>
<li><b>Select File&rarr;New Project.</b></li>
<li><b>Select Web in the Categories pane.</b></li>
<li><b>Select Web Application in the Projects pane.</b></li>
<li><b>Click Next.</b></li>
<li><b>Set Project Name to <tt>firstcup-dukes-age</tt>.</b></li>
<li><b>Set the Project Location to <tt>&lt;INSTALL>/myexample</tt>, in which INSTALL is the location of
the <tt>firstcup</tt> tutorial installation.</b></li>
<li><b>Select your Application Server from the Server menu.</b></li>
<li><b>Select Java EE 5 from the Java EE Version menu.</b></li>
<li><b>Set Context Path to <tt>/DukesAgeService</tt></b></li>
<li><b>Click Finish.</b><p>You should now see the module you created in the Projects pane. </p></li>
<li><b>From the Projects pane, right-click on the <tt>index.jsp</tt> file and select Delete. Click
Yes in the dialog.</b></li></ol>
<!--stopindex-->
</div>


<!-- END CENTRAL COLUMN COMPONENTS -->
</td></tr>

<!-- BEGIN SPACER ROW -->
<tr><td><img src="css/a.gif" width="780" height="1" border="0" alt="" /></td></tr>
<!-- END SPACER ROW -->

<tr><td>

<!-- BEGIN PAGE CONTROL ROW -->
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr valign="bottom">
<td></td>
<td style="width: 60%"></td>
<td><a href="p5.html"><img style="padding-right: 3px" src="graphics/prev.gif" border="0">Previous</a></td>
<td><a href="toc.html">Contents</a></td>
<td></td>
<td><a href="p7.html">Next<img style="padding-left: 3px" src="graphics/next.gif" border="0"></a></td>
</tr>
</table>
<!-- END PAGE CONTROL ROW -->
</td></tr>

</table>
<!-- END WRAPPER TABLE, 1 COLUMN, MAIN -->


<!-- BEGIN A5 COMPONENT V.0 -->
<div class="a5" id="a5v0">
<span class="footerlinks">
<a href="http://www.sun.com/company/">Company Info</a>
<a href="http://www.sun.com/contact/">Contact</a>
<a href="http://www.sun.com/share/text/termsofuse.html">Terms of Use</a>
<a href="http://www.sun.com/privacy/">Privacy</a>

<span class="footercopy">Copyright 1994-2006 Sun Microsystems, Inc.</span>
</span>
</div>
<!-- END A5 COMPONENT V.0 -->

</body>
</html>

