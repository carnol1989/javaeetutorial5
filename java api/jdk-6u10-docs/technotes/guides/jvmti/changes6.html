<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Enhancements in JVM TI</title>
<meta name="collection" content="reference">
<link rel="stylesheet" href="doc.css" type="text/css">
  </head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#000077" ALINK="#FF0000">
<TABLE summary="layout" BORDER="0" WIDTH="100%">

<TR>
<TD WIDTH="60">
   <IMG SRC="../../../images/javalogo52x88.gif" ALT="Java" BORDER=0 WIDTH=52 HEIGHT=88>

</TD>
<TD>

<center>
           <h1>Enhancements in JDK 6<br> 
         Java<SUP><FONT SIZE="1">TM</FONT></SUP> Virtual Machine Tool Interface (JVM TI)</h1>
</center>

</TD>
<TD ALIGN=RIGHT VALIGN=TOP>
   <font size="-1"><a href="index.html">Contents</a></font>

</TD>
</TR>
</TABLE>

<hr>
The following functionality has been added to the 
JVM<sup><font size="-1">TM</font></sup> tool interface (JVM TI)
between its initial release in JDK 5.0 and JDK 6.
<UL>
<LI><B>Support for transformation of class files</B> -
To facilitate dynamic transformation of classes which have already been loaded, the 
<A HREF="../../../platform/jvmti/jvmti.html#RetransformClasses"><code>RetransformClasses</code></A>
function has been added.  It is suited to operations such as adding instrumentation
to methods.  
Support for retransformation means that access to the original class file is no longer
required in order to instrument loaded classes.
It can easily remove the applied transformation and it is designed to 
work in a multi-agent environment.<P>

</LI>

<LI><B>Enhanced heap walking support</B> -
More powerful and flexible 
<A HREF="../../../platform/jvmti/jvmti.html#Heap">heap functionality</A>
has been added.  The new functionality:
  <UL>
    <LI>allows access to primitive values (the value of Strings, arrays, and primitive fields)</LI>
    <LI>allows the tag of the referrer to be set, thus enabling more efficient localized reference graph building</LI>
    <LI>provides more extensive filtering abilities</LI>

    <LI>is extensible, allowing abilities to grow in future versions of JVM TI</LI>
  </UL>
The 
<A HREF="../../../platform/jvmti/jvmti.html#FollowReferences"><code>FollowReferences</code></A>
and
<A HREF="../../../platform/jvmti/jvmti.html#IterateThroughHeap"><code>IterateThroughHeap</code></A>
functions
have been added along with supporting types and constants.
The previous functionality is still supported but its use is discouraged.<P>
</LI>

<LI><B>More class information</B> -
The new
<A HREF="../../../platform/jvmti/jvmti.html#GetConstantPool"><code>GetConstantPool</code></A>,
<A HREF="../../../platform/jvmti/jvmti.html#GetClassVersionNumbers"><code>GetClassVersionNumbers</code></A>
and
<A HREF="../../../platform/jvmti/jvmti.html#IsModifiableClass"><code>IsModifiableClass</code></A>
functions provide additional information about a class.<P>
</LI>

<LI><B>Support for instrumenting native methods</B> -
The new 
<A HREF="../../../platform/jvmti/jvmti.html#SetNativeMethodPrefix"><code>SetNativeMethodPrefix</code></A>
and

<A HREF="../../../platform/jvmti/jvmti.html#SetNativeMethodPrefixes"><code>SetNativeMethodPrefixes</code></A>
functions
allow native methods to be instrumented by providing a JVM-aware mechanism for wrapping the native method.<P>
</LI>

<LI><B>Enhanced support for instrumentation under the system class loader</B> -
The new 
<A HREF="../../../platform/jvmti/jvmti.html#AddToSystemClassLoaderSearch"><code>AddToSystemClassLoaderSearch</code></A>
function allows instrumentation support classes to be defined by the system class loader.<P>
</LI>

<LI><B>Support for early return from a method</B> -
The new 
<A HREF="../../../platform/jvmti/jvmti.html#ForceEarlyReturn">force early return</A>
functions allow debugger-like tools to force a method to return from any point
in its execution.<P>
</LI>

<LI><B>Monitor stack depth information</B> -
The new 
<A HREF="../../../platform/jvmti/jvmti.html#GetOwnedMonitorStackDepthInfo"><code>GetOwnedMonitorStackDepthInfo</code></A>
function provides information about the monitors owned by the specified thread and the depth of the stack frame which locked them.<P>
</LI>

<LI><B>Support for resource exhaustion notification</B> -
The new 
<A HREF="../../../platform/jvmti/jvmti.html#ResourceExhausted"><code>ResourceExhausted</code></A>
event notifies the JVM when a critical resource (such as the Java<sup><font size="-1">TM</font></sup>
platform heap) has been exhausted.<P>
</LI>

</UL>

Other changes between JDK 5.0 and JDK 6 include new error codes, a revised definition for field index, allowing
<A HREF="../../../platform/jvmti/jvmti.html#AddToBootstrapClassLoaderSearch"><code>AddToBootstrapClassLoaderSearch</code></A>
to be called in the live phase, and
considerable specification clean-up and clarification.
For detailed information about the changes, see the
<A HREF="../../../platform/jvmti/jvmti.html#ChangeHistory">Change History</A>.




<!-- ============================================================== -->

<HR SIZE=3 NOSHADE>

<TABLE summary="layout" BORDER="0" WIDTH="100%">
<TR VALIGN=TOP>
<TD>
<FONT SIZE="-2">
   <A HREF="../../../legal/SMICopyright.html">Copyright &#169;</A> 2006
   <A HREF="http://www.sun.com/">Sun Microsystems, Inc.</A>
    All Rights Reserved.</FONT><p></P>

   <br>
<!--
<FONT SIZE="-1">
Please send comments to:
</FONT>
-->

</TD>
<TD ALIGN=RIGHT>
   <IMG SRC="../../../images/sunlogo64x30.gif" ALT="Sun" BORDER=0 WIDTH=64 HEIGHT=30>
</TD>
</TR>
</TABLE>
<pre>






</pre>
  </body>

